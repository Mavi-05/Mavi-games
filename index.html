<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Mavi’s Games</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #212336;
      height: 100%;
      font-family: 'Segoe UI', Arial, sans-serif;
      user-select: none;
      overflow: hidden;
    }
    #main-menu, #gameselect-menu, #name-modal {
      position: absolute;
      left: 50%; top: 50%;
      transform: translate(-50%, -50%);
      z-index: 100;
      background: rgba(20,20,30,0.98);
      border-radius: 18px;
      box-shadow: 0 6px 40px #000b;
      padding: 32px 38px;
      min-width: 340px;
      color: #fff;
      text-align: center;
      display: none;
    }
    #main-menu.show, #gameselect-menu.show, #name-modal.show {
      display: block;
    }
    #main-menu h1 {
      font-family: 'Segoe UI Black', Arial, sans-serif;
      color: #0cf;
      font-size: 56px;
      margin-bottom: 12px;
      letter-spacing: 2px;
      text-shadow: 0 4px 22px #0008;
    }
    #main-menu button, #gameselect-menu button, #name-modal button {
      font-size: 27px;
      padding: 13px 44px;
      border-radius: 15px;
      background: #f90;
      color: #fff;
      border: none;
      font-family: 'Segoe UI', Arial, sans-serif;
      font-weight: bold;
      margin: 16px 0 0 0;
      box-shadow: 0 2px 10px #000b;
      cursor: pointer;
      transition: background 0.2s;
    }
    #main-menu button:hover, #gameselect-menu button:hover, #name-modal button:hover {
      background: #fff;
      color: #f90;
    }
    #main-menu .subtitle {
      font-size: 22px;
      color: #fff;
      margin-bottom: 22px;
      letter-spacing: 1.2px;
    }
    #gameselect-menu h2 {
      font-size: 38px;
      margin-bottom: 6px;
      color: #0cf;
      letter-spacing: 1.5px;
    }
    #gameselect-menu .games-list {
      margin: 25px 0 10px 0;
      display: flex;
      flex-direction: column;
      gap: 18px;
    }
    .game-btn {
      font-size: 23px;
      padding: 10px 0;
      border-radius: 10px;
      background: #0cf;
      color: #fff;
      border: none;
      font-family: 'Segoe UI', Arial, sans-serif;
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 4px;
      transition: background 0.2s;
      box-shadow: 0 2px 10px #0008;
    }
    .game-btn:hover { background: #fff; color: #0cf; }
    .game-btn[disabled] {
      background: #444;
      color: #bbb;
      cursor: not-allowed;
      box-shadow: none;
    }
    #gameselect-menu .comingsoon {
      color: #fd0;
      font-size: 16px;
      margin-bottom: -4px;
      font-style: italic;
    }
    #name-modal label {
      font-size: 20px;
      margin-bottom: 16px;
      color: #fff;
      display: block;
    }
    #name-input {
      font-size: 24px;
      padding: 9px 16px;
      border-radius: 8px;
      border: 2px solid #0cf;
      outline: none;
      width: 220px;
      margin-bottom: 22px;
      margin-top: 6px;
      text-align: center;
      background: #212336;
      color: #fff;
    }
    #canvas-bg {
      position: absolute;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 1;
      pointer-events: none;
    }
    #game-canvas {
      position: absolute;
      left: 50%; top: 50%;
      transform: translate(-50%, -50%);
      background: #aaa;
      border-radius: 20px;
      box-shadow: 0 10px 48px #000b;
      z-index: 2;
      image-rendering: pixelated;
      width: 420px;
      height: 740px;
      max-width: 98vw;
      max-height: 94vh;
      min-width: 260px;
      min-height: 400px;
      pointer-events: none;
      display: none;
    }
    #game-ui, #char-select, #shop, #gameover, #pause {
      z-index: 10;
    }
    @media (max-width: 600px) {
      #game-canvas { width: 98vw; height: 70vw; min-width: 0; min-height: 0; }
    }
  </style>
</head>
<body>
  <canvas id="canvas-bg"></canvas>
  <canvas id="game-canvas" width="420" height="740"></canvas>

  <div id="main-menu" class="show">
    <h1>Mavi’s Games</h1>
    <div class="subtitle">Willkommen<span id="mainmenu-user"></span>!</div>
    <button id="mainmenu-play-btn">Loslegen</button>
    <div style="margin-top:32px;font-size:17px;color:#fff8;">v1.0 – Viel Spaß, Mavi!</div>
  </div>
  <div id="gameselect-menu">
    <h2>Game-Auswahl</h2>
    <div class="games-list">
      <button class="game-btn" id="btn-subway">Subway Surfer</button>
      <div>
        <button class="game-btn" disabled>Snake</button>
        <div class="comingsoon">Coming soon!</div>
      </div>
      <div>
        <button class="game-btn" disabled>Flappy Bird</button>
        <div class="comingsoon">Coming soon!</div>
      </div>
      <div>
        <button class="game-btn" disabled>2048</button>
        <div class="comingsoon">Coming soon!</div>
      </div>
    </div>
    <button style="font-size:18px;padding:8px 26px;border-radius:8px;background:#0cf;color:#fff;margin-top:8px;" id="gameselect-back">Zurück</button>
  </div>
  <div id="name-modal">
    <form id="name-form" autocomplete="off">
      <label for="name-input">Wie heißt du?</label>
      <input id="name-input" type="text" maxlength="16" required placeholder="Dein Name...">
      <br>
      <button type="submit">Speichern</button>
    </form>
  </div>

  <!-- Subway Surfer UI/Modals werden dynamisch später eingefügt! -->

  <script>
  // ==== Name & Menü-Logik ====
  let userName = localStorage.getItem("mavisgames_username") || "";
  const mainMenu = document.getElementById("main-menu");
  const mainMenuUser = document.getElementById("mainmenu-user");
  const nameModal = document.getElementById("name-modal");
  const nameInput = document.getElementById("name-input");
  const nameForm = document.getElementById("name-form");
  const gameSelectMenu = document.getElementById("gameselect-menu");
  const btnSubway = document.getElementById("btn-subway");
  const gameCanvas = document.getElementById("game-canvas");
  const canvasBg = document.getElementById("canvas-bg");
  let inGame = false;

  function showMainMenu() {
    inGame = false;
    gameCanvas.style.display = "none";
    mainMenu.classList.add("show");
    gameSelectMenu.classList.remove("show");
    mainMenuUser.textContent = userName ? `, ${userName}` : "";
  }
  function showGameSelect() {
    mainMenu.classList.remove("show");
    gameSelectMenu.classList.add("show");
  }
  function showNameModal(force=false) {
    nameModal.classList.add("show");
    mainMenu.classList.remove("show");
    gameSelectMenu.classList.remove("show");
    if (!force && userName) nameInput.value = userName;
    setTimeout(()=>nameInput.focus(), 200);
  }
  function setName(name) {
    userName = name.trim().slice(0,16);
    localStorage.setItem("mavisgames_username", userName);
    nameModal.classList.remove("show");
    showMainMenu();
  }
  // Initiale Namensabfrage
  window.addEventListener('DOMContentLoaded', ()=>{
    if (!userName) showNameModal();
    else showMainMenu();
  });
  // Namens-Formular
  nameForm.onsubmit = (e) => {
    e.preventDefault();
    if (nameInput.value.trim()) setName(nameInput.value);
  };
  // Menü-Buttons
  document.getElementById("mainmenu-play-btn").onclick = showGameSelect;
  document.getElementById("gameselect-back").onclick = showMainMenu;
  btnSubway.onclick = () => {
    inGame = true;
    gameSelectMenu.classList.remove("show");
    startSubwaySurfer();
  };
  // Name per Klick ändern
  mainMenuUser.onclick = () => showNameModal(true);

  // Optional: Name beim Klick auf Begrüßung ändern
  mainMenuUser.style.textDecoration = "underline";
  mainMenuUser.style.cursor = "pointer";
  mainMenuUser.title = "Klicke, um deinen Namen zu ändern";

  // ========== Subway-Surfer-Spiel und UI wird jetzt im nächsten Block eingefügt! ==========

  // Platzhalter für Spielstart
  function startSubwaySurfer() {
    // Das eigentliche Subway-Surfer-Spiel kommt in Teil 2.
    // Hier wird das Menü ausgeblendet und das Spiel initialisiert.
    mainMenu.classList.remove("show");
    gameSelectMenu.classList.remove("show");
    nameModal.classList.remove("show");
    gameCanvas.style.display = "block";
    // ... Weiter mit Subway-Surfer (siehe Teil 2)
  }

  </script>
</body>
</html>
